# Task Seed: DiffMergeView / MergeDock 統合実装

## 背景
- precision フラグ (`legacy`/`beta`/`stable`) に応じて Diff Merge タブの露出と初期フォーカスを制御する必要がある。
- `queueMergeCommand` を中心にしたハンク操作データフローと AutoSave ロック連携を整備する。

## ゴール
1. `MergeDock` に precision 判定ロジックを追加し、タブ構成を段階的に切り替えられること。
2. `DiffMergeView` が `queueMergeCommand`/`subscribeMergeEvents` と連携し、ハンク操作 UI を提供すること。
3. Analyzer/Reporter 用テレメトリ (`merge:ui:*`) と AutoSave ロック (`autosave.lock.merge.*`) が整合すること。

## 成果物
- 実装済み `MergeDock`/`DiffMergeView` コンポーネント。
- precision モード別テスト (`node:test`)。
- AutoSave/Telemetry の結合テスト。

## タスク分解
1. precision 判定とタブ配列ロジックの実装 (`MergeDock`)
2. `DiffMergeTabs`/`DiffMergeView` の骨格実装（遅延ロードとスナップショット復元）
3. ハンク操作ハンドラ (`queueMergeCommand`) とイベント購読の接続
4. AutoSave ロックインタフェース実装と UI ロック表示
5. テレメトリ送出 (`merge:ui:*`) の追加
6. precision モード・ハンク操作・エラー復旧のテスト追加

## 依存
- `merge.precision` フラグの設定取得ロジック (Task3 依存)
- AutoSave 実装 (docs/AUTOSAVE-DESIGN-IMPL.md)
- Merge Event Hub (docs/MERGE-DESIGN-IMPL.md)

## リスク/懸念
- precision 切替時の状態同期遅延で UI 不整合が起きる可能性
- AutoSave ロック取得失敗時のリトライ UX が不足
- Analyzer/Reporter のイベントスキーマ変更による既存ダッシュボード影響

